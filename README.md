# IpSearch Service

**–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ–¥—Å–µ—Ç–µ–π.**

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥—Å–µ—Ç–∏, –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∏—Ö –∫ –∫–æ–º–ø–∞–Ω–∏—è–º, –¥–æ–±–∞–≤–ª—è—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ IP-–∞–¥—Ä–µ—Å–∞–º, –ø–æ–¥—Å–µ—Ç—è–º –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏—è–º.

---

## üìö –ú–µ—Ç–æ–¥—ã API

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏ (`/add_subnet`)
**–ú–µ—Ç–æ–¥:** `POST`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥—Å–µ—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è `network` –∏ `company` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤–µ—Ä–Ω—ë—Ç—Å—è –æ—à–∏–±–∫–∞.  

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "network": "192.168.1.0/24",
  "company": "Example Corp",
  "description": "Corporate network"
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "message": "Subnet added successfully."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –ø–æ–¥—Å–µ—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):**
```json
{
  "detail": "Subnet already exists for this company."
}
```

---

### 2. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏ –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (`/delete_subnet`)
**–ú–µ—Ç–æ–¥:** `DELETE`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç –ø–æ–¥—Å–µ—Ç—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `network` –∏ `company`.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "network": "192.168.1.0/24",
  "company": "Example Corp"
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "message": "Subnet 192.168.1.0/24 for company Example Corp deleted successfully."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞):**
```json
{
  "detail": "Network 192.168.1.0/24 for company Example Corp not found."
}
```

---

### 3. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏ –ø–æ ID (`/delete_subnet_index/{id}`)
**–ú–µ—Ç–æ–¥:** `DELETE`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```http
DELETE /delete_subnet_index/5
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "message": "Subnet with ID 5 deleted successfully."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ ID –Ω–µ –Ω–∞–π–¥–µ–Ω):**
```json
{
  "detail": "Subnet with ID 5 not found."
}
```

---

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π (`/get_all_subnets`)
**–ú–µ—Ç–æ–¥:** `GET`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "id": 1,
    "network": "192.168.1.0/24",
    "company": "Example Corp",
    "description": "Corporate network"
  },
  {
    "id": 2,
    "network": "10.0.0.0/8",
    "company": "Another Corp",
    "description": "Internal network"
  }
]
```

---

### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π (`/get_companies`)
**–ú–µ—Ç–æ–¥:** `GET`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–π, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
[
  "Example Corp",
  "Another Corp"
]
```

---

### 6. –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–µ–π (`/search_subnet`)
**–ú–µ—Ç–æ–¥:** `POST`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ IP/–ø–æ–¥—Å–µ—Ç–∏ –∏/–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏.  
–ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ –∑–∞–ø–∏—Å–∏.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ IP):**
```json
{
  "query": "192.168.1.1"
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ –ø–æ–¥—Å–µ—Ç–∏):**
```json
{
  "query": "192.168.1.0/24"
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ –∫–æ–º–ø–∞–Ω–∏–∏):**
```json
{
  "company": "Example Corp"
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "id": 1,
    "network": "192.168.1.0/24",
    "company": "Example Corp",
    "description": "Corporate network"
  }
]
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞):**
```json
{
  "detail": "Invalid IP or network format."
}
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.9+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`:
  ```bash
  pip install -r requirements.txt
  ```

### –®–∞–≥–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
0. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ).
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Uvicorn:
   ```bash
   uvicorn app:app --reload --host 0.0.0.0 --port 8000
   ```
2. –ü–µ—Ä–µ–π—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É:
   ```
   http://127.0.0.1:8000
   ```

---

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
.
‚îú‚îÄ‚îÄ app.py                # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
‚îú‚îÄ‚îÄ subnets.db            # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ static/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css    # –°—Ç–∏–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js        # –õ–æ–≥–∏–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico       # –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ index.html        # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **FastAPI:** –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API.
- **SQLite:** –õ—ë–≥–∫–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **HTML, CSS, JS:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---
